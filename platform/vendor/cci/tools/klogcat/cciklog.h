#ifndef __KLOGCAT_H__
#define __KLOGCAT_H__

#ifndef __KLOG_COMMON_H__
#include "cciklog_common.h"
#endif // #ifndef __KLOG_COMMON_H__

#ifdef CCI_KLOG
#define WAIT_INIT_DUMP_TIME_NOT_BOOTED				60
#define WAIT_INIT_DUMP_TIME_BOOT_COMPLETED			5
#ifdef CCI_KLOG_STORE_USERDATA
	#define KLOG_PATH_USERDATA_PARTITION			"/data"
	#define KLOG_PATH_USERDATA				"/data/klog"
#endif // #ifdef CCI_KLOG_STORE_USERDATA
#ifdef CCI_KLOG_STORE_INTERNAL
	#define KLOG_PATH_INTERNAL_PARTITION			"/mnt/shell/emulated"
	#define KLOG_PATH_INTERNAL				"/storage/sdcard0/klog"
	#define KLOG_PATH_INTERNAL_PARTITION_ALIAS		"/sdcard"
	#define KLOG_PATH_INTERNAL_ALIAS			"/sdcard/klog"
#endif // #ifdef CCI_KLOG_STORE_INTERNAL
#ifdef CCI_KLOG_STORE_EXTERNAL
	#define KLOG_PATH_EXTERNAL_PARTITION			"/storage/sdcard1"
	#define KLOG_PATH_EXTERNAL				"/storage/sdcard1/klog"
//	#define KLOG_PATH_EXTERNAL_PARTITION_ALIAS		"/ext_card"
//	#define KLOG_PATH_EXTERNAL_ALIAS			"/ext_card/klog"
#endif // #ifdef CCI_KLOG_STORE_EXTERNAL
#ifdef CCI_KLOG_SUPPORT_RESTORATION
	#define KLOG_TEMP_FILE					"/data/klog-file/klog.txt"
#endif // #ifdef CCI_KLOG_SUPPORT_RESTORATION
#define KLOG_FILENAME_VALID_PATTERN				"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_./"
#define KLOG_FILENAME						"klog-"
#define KLOG_FILENAME_EXT					".txt"
#define KLOG_FILENAME_EXT_GZIP					".gz"
#define KLOG_FILES_MAX						100
#define KLOG_PROPERTY_NAME_MAX					"persist.klog.max"
#define KLOG_PROPERTY_NAME_USERDATA_COUNT			"persist.klog.userdata.count"
#define KLOG_PROPERTY_NAME_INTERNAL_COUNT			"persist.klog.internal.count"
#define KLOG_PROPERTY_NAME_EXTERNAL_COUNT			"persist.klog.external.count"
#ifdef CCI_KLOG_ALLOW_FORCE_PANIC
#define KLOG_PROPERTY_VALUE_MAX					"100"
#else // CCI_KLOG_ALLOW_FORCE_PANIC
#define KLOG_PROPERTY_VALUE_MAX					"10"
#endif // CCI_KLOG_ALLOW_FORCE_PANIC
#define CCI_KLOG_SUPPORT_MTBF
#define KLOG_PROPERTY_VALUE_USERDATA_COUNT			"-1"
#define KLOG_PROPERTY_VALUE_INTERNAL_COUNT			"-1"
#define KLOG_PROPERTY_VALUE_EXTERNAL_COUNT			"-1"
#define KLOG_COMMAND_KLOG_INIT					"init"
#define KLOG_COMMAND_CHECK_KLOG					"checklog"
#define KLOG_COMMAND_CLEAR_KLOG_BUFFER				"clearbuffer"
#define KLOG_COMMAND_DUMP_KLOG					"dump"
#define KLOG_COMMAND_CLEAN_KLOG_FILES				"clean"
#define KLOG_COMMAND_RECORD_SYSINFO				"sysinfo"
#define KLOG_COMMAND_RECORD_BOOT_COMPLETE			"boot"
#define KLOG_COMMAND_RECORD_USER_PWROFF				"shut"
#define KLOG_COMMAND_RECORD_KERNEL_PWROFF			"down"
#ifdef CCI_KLOG_ALLOW_FORCE_PANIC
#define KLOG_COMMAND_TRIGGER_KERNEL_PANIC			"panic"
#define KLOG_COMMAND_TRIGGER_KERNEL_CRASH			"crash"
#define KLOG_COMMAND_TRIGGER_USER_NULLPOINTER			"nullpointer"
#define KLOG_COMMAND_TRIGGER_USER_DIV0				"div0"
#define KLOG_COMMAND_SET_SUSPEND_PANIC				"suspendpanic"
#define KLOG_COMMAND_SET_POWEROFF_PANIC				"poweroffpanic"
#define KLOG_COMMAND_SET_MAGIC					"magic"
#endif // #ifdef CCI_KLOG_ALLOW_FORCE_PANIC

static struct klog_magic_list kml[] =
{
//	{KLOG_INDEX_FORCE_CLEAR, KLOG_MAGIC_FORCE_CLEAR, KLOG_PRIORITY_FORCE_CLEAR},
//	{KLOG_INDEX_INIT, KLOG_MAGIC_INIT, KLOG_PRIORITY_KLOG_INIT},
	{KLOG_INDEX_MARM_FATAL, KLOG_MAGIC_MARM_FATAL, KLOG_PRIORITY_MARM_FATAL},
	{KLOG_INDEX_AARM_PANIC, KLOG_MAGIC_AARM_PANIC, KLOG_PRIORITY_AARM_PANIC},
	{KLOG_INDEX_RPM_CRASH, KLOG_MAGIC_RPM_CRASH, KLOG_PRIORITY_RPM_CRASH},
	{KLOG_INDEX_SUBSYS_CRASH, KLOG_MAGIC_SUBSYS_CRASH, KLOG_PRIORITY_SUBSYS_CRASH},
	{KLOG_INDEX_FIQ_HANG, KLOG_MAGIC_FIQ_HANG, KLOG_PRIORITY_FIQ_HANG},
	{KLOG_INDEX_UNKNOWN_CRASH, KLOG_MAGIC_UNKNOWN_CRASH, KLOG_PRIORITY_UNKNOWN_CRASH},
//	{KLOG_INDEX_DOWNLOAD_MODE, KLOG_MAGIC_DOWNLOAD_MODE, KLOG_PRIORITY_DOWNLOAD_MODE},
//	{KLOG_INDEX_POWER_OFF, KLOG_MAGIC_POWER_OFF, KLOG_PRIORITY_POWER_OFF},
//	{KLOG_INDEX_REBOOT, KLOG_MAGIC_REBOOT, KLOG_PRIORITY_NATIVE_COMMAND},
//	{KLOG_INDEX_BOOTLOADER, KLOG_MAGIC_BOOTLOADER, KLOG_PRIORITY_NATIVE_COMMAND},
//	{KLOG_INDEX_RECOVERY, KLOG_MAGIC_RECOVERY, KLOG_PRIORITY_NATIVE_COMMAND},
//	{KLOG_INDEX_OEM_COMMAND, KLOG_MAGIC_OEM_COMMAND, KLOG_PRIORITY_OEM_COMMAND},
};

static unsigned int max_category_size = 0;
static unsigned int get_max_category_size(void)
{
	if(max_category_size == 0)
	{
#if CCI_KLOG_APPSBL_SIZE
		if(max_category_size < CCI_KLOG_APPSBL_SIZE)
		{
			max_category_size = CCI_KLOG_APPSBL_SIZE;
		}
#endif // #if CCI_KLOG_APPSBL_SIZE
#if CCI_KLOG_KERNEL_SIZE
		if(max_category_size < CCI_KLOG_KERNEL_SIZE)
		{
			max_category_size = CCI_KLOG_KERNEL_SIZE;
		}
#endif // #if CCI_KLOG_KERNEL_SIZE
#if CCI_KLOG_ANDROID_MAIN_SIZE
		if(max_category_size < CCI_KLOG_ANDROID_MAIN_SIZE)
		{
			max_category_size = CCI_KLOG_ANDROID_MAIN_SIZE;
		}
#endif // #if CCI_KLOG_ANDROID_MAIN_SIZE
#if CCI_KLOG_ANDROID_SYSTEM_SIZE
		if(max_category_size < CCI_KLOG_ANDROID_SYSTEM_SIZE)
		{
			max_category_size = CCI_KLOG_ANDROID_SYSTEM_SIZE;
		}
#endif // #if CCI_KLOG_ANDROID_SYSTEM_SIZE
#if CCI_KLOG_ANDROID_RADIO_SIZE
		if(max_category_size < CCI_KLOG_ANDROID_RADIO_SIZE)
		{
			max_category_size = CCI_KLOG_ANDROID_RADIO_SIZE;
		}
#endif // #if CCI_KLOG_ANDROID_RADIO_SIZE
#if CCI_KLOG_ANDROID_EVENTS_SIZE
		if(max_category_size < CCI_KLOG_ANDROID_EVENTS_SIZE)
		{
			max_category_size = CCI_KLOG_ANDROID_EVENTS_SIZE;
		}
#endif // #if CCI_KLOG_ANDROID_EVENTS_SIZE
	}

	return max_category_size;
}
#endif // #ifdef CCI_KLOG

#endif // #ifndef __KLOGCAT_H__

