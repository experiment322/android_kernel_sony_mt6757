ifneq ($(BUILD_TINY_ANDROID),true)
ifeq ($(CCI_TARGET_KLOG),true)
LOCAL_PATH:= $(call my-dir)

# For libklog library.
include $(CLEAR_VARS)

LOCAL_MODULE := libklog
LOCAL_MODULE_TAGS := optional
LOCAL_SRC_FILES := libklog.c libsnapshot.c
LOCAL_SHARED_LIBRARIES := libc libcutils liblog

ifeq ($(CCI_TARGET_KLOG),true)
	LOCAL_CFLAGS += -DCCI_KLOG
	LOCAL_CFLAGS += -DCCI_KLOG_START_ADDR_PHYSICAL=$(CCI_TARGET_KLOG_START_ADDR_PHYSICAL)
	LOCAL_CFLAGS += -DCCI_KLOG_SIZE=$(CCI_TARGET_KLOG_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_HEADER_SIZE=$(CCI_TARGET_KLOG_HEADER_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_CRASH_SIZE=$(CCI_TARGET_KLOG_CRASH_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_APPSBL_SIZE=$(CCI_TARGET_KLOG_APPSBL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_KERNEL_SIZE=$(CCI_TARGET_KLOG_KERNEL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_MAIN_SIZE=$(CCI_TARGET_KLOG_ANDROID_MAIN_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_SYSTEM_SIZE=$(CCI_TARGET_KLOG_ANDROID_SYSTEM_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_RADIO_SIZE=$(CCI_TARGET_KLOG_ANDROID_RADIO_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_EVENTS_SIZE=$(CCI_TARGET_KLOG_ANDROID_EVENTS_SIZE)
ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_USERDATA
endif # ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_INTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_EXTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
	LOCAL_CFLAGS += -DCCI_KLOG_SUPPORT_CCI_ENGMODE
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
ifneq ($(TARGET_BUILD_VARIANT),user)
	LOCAL_CFLAGS += -DCCI_KLOG_ALLOW_FORCE_PANIC
ifeq ($(CCI_TARGET_KLOG_SUPPORT_RESTORATION),true)
	LOCAL_CFLAGS += -DCCI_KLOG_SUPPORT_RESTORATION
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_RESTORATION),true)
endif # ifneq ($(TARGET_BUILD_VARIANT),user)
endif # ifeq ($(CCI_TARGET_KLOG),true)

include $(BUILD_SHARED_LIBRARY)

# For klogcat executable binary.
include $(CLEAR_VARS)

LOCAL_MODULE := klogcat
LOCAL_MODULE_TAGS := optional
LOCAL_SRC_FILES := klogcat.c
LOCAL_SHARED_LIBRARIES := libc libcutils libklog liblog

ifeq ($(CCI_TARGET_KLOG),true)
	LOCAL_CFLAGS += -DCCI_KLOG
	LOCAL_CFLAGS += -DCCI_KLOG_START_ADDR_PHYSICAL=$(CCI_TARGET_KLOG_START_ADDR_PHYSICAL)
	LOCAL_CFLAGS += -DCCI_KLOG_SIZE=$(CCI_TARGET_KLOG_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_HEADER_SIZE=$(CCI_TARGET_KLOG_HEADER_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_CRASH_SIZE=$(CCI_TARGET_KLOG_CRASH_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_APPSBL_SIZE=$(CCI_TARGET_KLOG_APPSBL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_KERNEL_SIZE=$(CCI_TARGET_KLOG_KERNEL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_MAIN_SIZE=$(CCI_TARGET_KLOG_ANDROID_MAIN_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_SYSTEM_SIZE=$(CCI_TARGET_KLOG_ANDROID_SYSTEM_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_RADIO_SIZE=$(CCI_TARGET_KLOG_ANDROID_RADIO_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_EVENTS_SIZE=$(CCI_TARGET_KLOG_ANDROID_EVENTS_SIZE)
ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_USERDATA
endif # ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_INTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_EXTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
	LOCAL_CFLAGS += -DCCI_KLOG_SUPPORT_CCI_ENGMODE
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
ifneq ($(TARGET_BUILD_VARIANT),user)
	LOCAL_CFLAGS += -DCCI_KLOG_ALLOW_FORCE_PANIC
ifeq ($(CCI_TARGET_KLOG_SUPPORT_RESTORATION),true)
	LOCAL_CFLAGS += -DCCI_KLOG_SUPPORT_RESTORATION
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_RESTORATION),true)
endif # ifneq ($(TARGET_BUILD_VARIANT),user)
endif # ifeq ($(CCI_TARGET_KLOG),true)

include $(BUILD_EXECUTABLE)

ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
# For engmode executable binary.
include $(CLEAR_VARS)

LOCAL_MODULE := engmode
LOCAL_MODULE_TAGS := optional
LOCAL_SRC_FILES := engmode.c
LOCAL_SHARED_LIBRARIES := libc libcutils liblog

ifeq ($(CCI_TARGET_KLOG),true)
	LOCAL_CFLAGS += -DCCI_KLOG
	LOCAL_CFLAGS += -DCCI_KLOG_START_ADDR_PHYSICAL=$(CCI_TARGET_KLOG_START_ADDR_PHYSICAL)
	LOCAL_CFLAGS += -DCCI_KLOG_SIZE=$(CCI_TARGET_KLOG_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_HEADER_SIZE=$(CCI_TARGET_KLOG_HEADER_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_CRASH_SIZE=$(CCI_TARGET_KLOG_CRASH_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_APPSBL_SIZE=$(CCI_TARGET_KLOG_APPSBL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_KERNEL_SIZE=$(CCI_TARGET_KLOG_KERNEL_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_MAIN_SIZE=$(CCI_TARGET_KLOG_ANDROID_MAIN_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_SYSTEM_SIZE=$(CCI_TARGET_KLOG_ANDROID_SYSTEM_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_RADIO_SIZE=$(CCI_TARGET_KLOG_ANDROID_RADIO_SIZE)
	LOCAL_CFLAGS += -DCCI_KLOG_ANDROID_EVENTS_SIZE=$(CCI_TARGET_KLOG_ANDROID_EVENTS_SIZE)
ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_USERDATA
endif # ifeq ($(CCI_TARGET_KLOG_STORE_USERDATA),true)
ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_INTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_INTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
	LOCAL_CFLAGS += -DCCI_KLOG_STORE_EXTERNAL
endif # ifeq ($(CCI_TARGET_KLOG_STORE_EXTERNAL),true)
ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
	LOCAL_CFLAGS += -DCCI_KLOG_SUPPORT_CCI_ENGMODE
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)
ifneq ($(TARGET_BUILD_VARIANT),user)
	LOCAL_CFLAGS += -DCCI_KLOG_ALLOW_FORCE_PANIC
endif # ifneq ($(TARGET_BUILD_VARIANT),user)
endif # ifeq ($(CCI_TARGET_KLOG),true)

include $(BUILD_EXECUTABLE)
endif # ifeq ($(CCI_TARGET_KLOG_SUPPORT_CCI_ENGMODE),true)

endif # ifeq ($(CCI_TARGET_KLOG),true)
endif # ifneq ($(BUILD_TINY_ANDROID),true)

